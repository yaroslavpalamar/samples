Statement: Design a simplified version of Twitter where people can post tweets, follow other people and favorite tweets.

Questions:
Q1:
how many users do we expect this system to handle? - let’s aim for 10 million users generating around 100 million requests per day

Q2:
That’s great but let’s continue. Since we have the notion of following someone, how connected will these users be? 
After all, they will form a graph with the users being the nodes and the edges will represent who follows whom.
we expect that each user will be following 200 other users on average, but expect some extraordinary users with tens of thousands of followers

Conclusion:
Let’s make a few very simple calculations with the information we just received. 
We will have around 10 million users. Average number of followed other users is 200. 
This means that the network of users will have about 200 * 10 million edges. 
This makes 2 billion edges. If the average number of tweets per day is 10 million the number of favorites will then be 20 million.

To summarize, here are some more things we now know:
10 million users
10 million tweets per day
20 million tweet favorites per day
100 million HTTP requests to the site
2 billion “follow” relations
Some users and tweets could generate an extraordinary amount of traffic

We can divide our architecture in two logical parts: 
1) the logic, which will handle all incoming requests to the application and 
2) the data storage that we will use to store all the data that needs to be persisted. 

application will need to handle requests for:
-posting new tweets
-following a user
-favoriting a tweet
-displaying data about users and tweets

The first three operations require things to be written somewhere in our database, 
while the last is more about reading data and returning it back to the user. 
The last operation will also be the most common

More concrete description:
-There will be a profile page for each user, 
which will show us their latest tweets and will allow for older tweets to be shown.
-Each such page will have a button for following the user. and other buttons
-After they click a button the message will be stored and will appear on their profile page. 
 
___________
We know that the expected daily load is 100 million requests.
This means that on average the app will receive around 1150 requests per second.
-it is good to have more than one server If you only have one machine and it goes down your whole application is down. 
-In our particular problem we would definitely suggest using a load balancer, 
which handles initial traffic and sends requests to a set of servers running one or more instances of the application.
-Behind the load balancer we will be running a set of servers that are running our application and are capable of handling the different requests that arrive.
_________________
Storing the data (count limits based on our preconditions)
We need to store data about our users and their tweets to make the application complete.
Obviously, there are some relations between our data objects - users and tweets. 
Let’s assess the approximate size of the data to be stored. 
We said that we expect around 10 million users. 
For each user we have some profile to store the data 
-Tweets will be generated 10 million per day sot it will be around 115 per second. For a year it will be 3.65 billion per year.
So, let’s aim for a solution that can store efficiently at least 10 billion tweets for now and the incoming traffic mentioned above.
-1 tweet max 140 characters so we should store 140*10billion characters = 1.4 trillion  
  or around 2.8 terabytes if we assume 2 bytes per character(if java and UTF-18) and no compression of the data.
-also there will be connectino between profiles about 2 billiion
  and each connection will most likely just contain two IDs of users where the first follows the second
   it would be enough to store two 4-byte integer fields, making 8 * 2 bln = 16 bln bytes or 16 gigabytes.
-The favorites are expected to grow at a rate of 20 mln per day. So, for a year there will be 7.3 bln such actions. 
  Let’s say we want to be able to store at least 20 bln such objects that poit to one user and one tweet 
  one tweet 8 byte and for user 4 byte so in result will be (4+8)*20 bln so will have 240 gigabytes.
2.6 - 2.7 terabytes. Real-life examples show that famous companies like Twitter and 
Facebook manage to use relational databases for handling much bigger loads than that.
------------------------------------
Database schema - draft the tables and the relations between them?
We have two main entities: users and tweets. There could be two tables for them.
Table users:
-ID (id)
-username (username)
-full name (first_name & last_name)
-password related fields like hash and salt (password_hash & password_salt)
-date of creation and last update (created_at & updated_at)
-description (description)
-and maybe some other fields...

Tweets should be slightly simpler:
Table tweets:
-ID (id)
-content (content)
-date of creation (created_at)
-user ID of author (user_id)

These two entities have several types of relations between them:
users create tweets
users can follow users
users favorite tweets
------------------------------------


















